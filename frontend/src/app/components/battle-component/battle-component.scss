// LOG/HP colors
.log-damage { color: var(--bar-fill-red, #e74c3c); font-weight: bold; }
.log-crit { color: var(--accent, #86f7b3); font-weight: bold; }
.log-victory { color: var(--accent-hover, #baffd8); font-weight: bold; }
.log-defeat { color: var(--bar-fill-red, #e74c3c); font-weight: bold; }

// BATTLE LAYOUT
.battle-outer {
  background: var(--bg, #0b0c0b);
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: auto;
  height: 100vh;
}

.battle-window {
  display: flex;
  flex-direction: column;
  background: var(--grey-bg, #181818);
  width: 95%;
  padding: 0;
  overflow: hidden;
  height: 100vh;
}

// VS HEADLINE
.battle-vs-headline {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-top: 0.6rem;
  margin-bottom: 0.6rem;

  .vs-side {
    width: 50%;
    text-align: center;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-family: inherit;
    font-size: 2.1rem;
    font-weight: 800;
    letter-spacing: 3.5px;
    color: #4fff90;
    text-shadow: 0 0 10px #31ffb96c;
  }

  .vs-center {
    width: 10%;
    text-align: center;
    font-weight: bold;
    font-size: 2.2em;
    border-radius: 4px;;
    border: 1px solid var(--sidebar-border, #2c2c2c);
  }
  .vs-green {
      color: var(--accent, #86f7b3);
      margin: 0 18px;
      text-shadow: 0 0 7px #37ef8866;
    }
}


// BATTLE LOG
.battle-log-wrapper {
  flex: 1 1 0;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  min-height: 340px;
  max-height: 100%;
  overflow: hidden;
  background: var(--friend-li-bg, #111);
  margin: 0 1.1rem;
  border-radius: 4px;
}
.battle-log {
  background: var(--friend-li-bg, #111);
  height: 100%;
  width: 100%;
  overflow-y: auto;
  border-radius: 4px;
  padding: 0.6rem 1.1rem 1.1rem 1.1rem;
  font-size: 0.8rem;
  font-family: 'Fira Mono', 'JetBrains Mono', monospace;
  color: var(--text, #d1ffe8);
  div {
    margin-bottom: 0.18rem;
    white-space: pre-line;
    line-height: 1.18;
    letter-spacing: 0.13px;
    font-family: inherit;
    font-size: 0.98rem;
    transition: color 0.18s;

    &.battle-encounter, &.battle-start { color: #e0ffef; font-weight: 500; letter-spacing: 0.7px; }
    &.battle-friendly-damage { color: #38ff92; font-weight: 700; text-shadow: 0 0 5px #27d53b55; }
    &.battle-enemy-damage { color: #ff5567; font-weight: 700; text-shadow: 0 0 4px #e74c3c55; }
    &.battle-hp-row { font-size: 1.08rem; font-weight: 700;
      .player-hp { color: #64ffb7; font-weight: 700; }
      .enemy-hp { color: #ff6060; font-weight: 700; }
      .hp-separator { color: #b9d6ce; font-weight: 400; padding: 0 4px; }
    }
    &.battle-crit { color: #86f7b3; font-weight: bold; text-shadow: 0 0 8px #86f7b388; letter-spacing: 1.1px; }
    &.battle-crit-enemy { color: #d6342a; font-weight: bold; text-shadow: 0 0 7px #f1373788; letter-spacing: 1.1px; }
    &.battle-victory { color: #f5ff99; font-weight: bold; text-shadow: 0 0 8px #ecffb788; }
    &.battle-defeat { color: #fa4242; font-weight: bold; text-shadow: 0 0 8px #f17f7f88; }
    &.battle-levelup { color: #c7ffda; font-weight: 700; text-shadow: 0 0 8px #77ffe788; }
    &.battle-user-levelup { color: #c7deff; font-weight: 700; text-shadow: 0 0 8px #77d3ff88; }
    &.battle-xp { color: #7c7c7c; font-weight: 500; }
    &.battle-status { color: #e6e6e6; font-weight: 700; letter-spacing: 1.2px; font-size: 1.02rem; text-shadow: 0 0 6px #ffefb26e; }
    &.error { color: #ffd6d6; background: #480f0f; padding: 3px 7px; border-radius: 4px; font-weight: 500; }
    &.info { color: #87c3ff; font-weight: 500; }
    &.battle-divider, &.turn-end { border-bottom: 1px dashed #4c4c4c; margin: 0.4rem 0 0.4rem 0; height: 1px; width: 94%; opacity: 0.7; background: none; color: transparent; }
    &:last-child { margin-bottom: 0; color: #86f7b3; font-weight: 700; font-size: 1.03rem; letter-spacing: 1px; }
  }
  .battle-hp-row {
    font-size: 1.09rem;
    font-weight: 600;
    .player-hp { color: #38ff92; font-weight: 700; margin-right: 8px; }
    .enemy-hp { color: #ff6060; font-weight: 700; margin-left: 8px; }
    .hp-separator { color: #b9d6ce; font-weight: 400; padding: 0 4px; }
  }
}

.battle-main-row {
  display: flex;
  flex-direction: row;
  width: 100%;
  gap: 1.2rem;
  margin: 1.2rem 0 0.7rem 0;
  align-items: flex-start;
  height: 40%;
  @media (max-width: 900px) {
    flex-direction: column;
    gap: 0.8rem;
    min-height: 120px;
  }
}

.battle-graphic-col {
  width: 50%;
  height: 100%;
  border-radius: 4px;
  background: linear-gradient(130deg, #20252077 40%, #1a2321cc 100%);
  margin-left: 1.1rem;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 0 14px #16211c77;
  position: relative;
  overflow: hidden;
  @media (max-width: 900px) {
    width: 100%;
    margin-left: 0;
    min-height: 90px;
  }
}
.battle-graphic-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  background: #111;
  box-shadow: 0 0 14px #16211c77;
}

// Monster image styling
.monster-image-container {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  border: 3px solid #4fff90;
  border-radius: 12px;
  background: linear-gradient(135deg, #1a2a1a 0%, #0f1a0f 100%);
  box-shadow: 
    0 0 20px rgba(79, 255, 144, 0.3),
    inset 0 0 20px rgba(79, 255, 144, 0.1);
  position: relative;
  overflow: hidden;
}

.monster-image-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(45deg, transparent 30%, rgba(79, 255, 144, 0.1) 50%, transparent 70%);
  pointer-events: none;
}

.monster-battle-img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
  border-radius: 8px;
  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5));
  transition: transform 0.3s ease;
}

.monster-battle-img:hover {
  transform: scale(1.05);
}

.battle-graphic-fallback {
  width: 100%;
  height: 100%;
}

.battle-controls-col {
  width: 50%;
  display: flex;
  flex-direction: column;
  gap: 0.9rem;
  margin-right: 1.1rem;
  @media (max-width: 900px) {
    width: 100%;
    margin-right: 0;
    gap: 0.5rem;
  }
}

// Fighter-row 
.fighter-row {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  border: 1px solid var(--sidebar-border, #2c2c2c);
  border-radius: 4px;
  background: var(--friend-li-bg, #111);
  padding: 0.5rem 1.2rem 0.5rem 1.2rem;
  gap: 1rem;
  margin: 0;
  position: relative;
  .player-info, .enemy-info {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 50%;
    text-align: center;
    display: flex;
    flex-direction: column;
    .name {
      color: var(--accent, #86f7b3);
      font-size: 1.03rem;
      font-weight: 700;
      letter-spacing: 0.6px;
      margin-bottom: 0.03rem;
    }
    .hp {
      font-size: 0.93rem;
      color: var(--meta-text, #7cbfa5);
      font-weight: 600;
      letter-spacing: 0.15px;
    }
  }
  .vs {
    width: 10%;
    text-align: center;
    color: var(--accent, #86f7b3);
    font-size: 1rem;
    font-weight: bold;
    align-self: center;
    background: var(--btn-bg, #1b1d1b);
    border-radius: 4px;
    border: 1px solid var(--sidebar-border, #2c2c2c);
  }
}

.battle-attack-buttons {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.5rem;
  width: 100%;
  @media (max-width: 700px) {
    grid-template-columns: 1fr;
    gap: 0.5rem 0;
    margin-bottom: 0.3rem;
  }
  .attack-btn {
    position: relative;
    background: var(--btn-bg, #18261c);
    color: var(--accent, #86f7b3);
    padding: 1rem;

    &:disabled {
      background: #151517 !important; 
      border-color: #000000 !important;
      opacity: 0.73;
      cursor: not-allowed;
      box-shadow: 0 0 2px #000000;
    }

    .attack-label {
      display: block;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      font-size: 1.07rem;
      color: var(--accent, #86f7b3);
      text-align: left;
    }
    .attack-charges {
      position: absolute;
      top: 0.32rem;
      right: 0.59rem;
      font-size: 0.7rem;
      font-weight: 500;
      letter-spacing: 0.5px;
      pointer-events: none;
      z-index: 1;
      opacity: 0.82;

      &.charge-high   { color: #3ef7c6; }
      &.charge-mid    { color: #ffe36f; }
      &.charge-low    { color: #fa5a59; }
      &.charge-empty  { color: #646e72; opacity: 0.48; }
    }

    .attack-type {
      position: absolute;
      bottom: 0.32rem;
      right: 0.59rem;
      font-size: 0.5rem;
      color: #a9b1aa;
      opacity: 0.75;
      font-weight: 500;
      letter-spacing: 0.5px;
      pointer-events: none;
      z-index: 1;
      border-radius: 4px;
      border: 1px solid #2c2c2c;
      padding: 0.1rem 0.3rem;
    }

    &.physical .attack-type {
      background: #2c3e50;
      color: #8affc1;
    }

    &.magic .attack-type {
      background: #8e44ad;
      color: #e0d4fe;
    }

    &.defense .attack-type {
      background: #455a64;
      color: #aee9e6;
    }

    &.buff .attack-type {
      background: #27ae60;
      color: #ecf0f1;
    }

    &.utility .attack-type {
      background: #b8e994;
      color: #21334a;
    }

    &.alt .attack-label {
      color: #7cbfa5;
    }
    &:hover:not(:disabled) {
      background: #212f25;
      color: #baffd8;
      border-color: #4fff90;
    }
    &.alt {
      color: #7cbfa5;
      background: #1b1d1b;
      border-color: #18422d;
      &:hover:not(:disabled) {
        background: #172b21;
        color: #baffd8;
        border-color: #49dfae;
      }
    }
  }
}

.battle-run-btn-row {
  display: flex;
  justify-content: flex-end;
  align-items: flex-end;
  position: absolute;
  right: 0.4em;
  bottom: 0.35em;
  height: auto;
  width: 30%;

  .run-btn {
    background: #be2c2c;
    color: #fff;
    border: 2px solid #8d2c2c;
    border-radius: 4px;
    font-weight: 800;
    font-size: 0.9rem;   
    letter-spacing: 2px;
    text-shadow: 0 0 4px #931818;
    padding: 0.33rem 0;   
    min-width: 100px;      
    transition: background 0.16s, border-color 0.14s, color 0.14s;
    display: flex;
    justify-content: center;
    align-items: center;
    &:hover:not(:disabled) {
      background: #ffb7af;
      border-color: #ff695b;
      color: #fff5e6;
      text-shadow: 0 0 6px #ff9797;
    }
    &:disabled {
      background: #493232;
      color: #a88787;
      border-color: #493232;
      opacity: 0.7;
    }
  }
}

.battle-actions-bottom {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  margin-top: 2.2rem;
  .start-battle-btn {
    margin-top: 0.2rem;
    padding: 0.32rem 2.3rem;
    font-size: 1.08rem;
    font-weight: 800;
    border-width: 2px;
    border-radius: 4px;
  }
}

.battle-divider {
  border-bottom: 1px solid var(--accent, #2c2c2c);
  margin: 0.65rem 0 0.75rem 0;
  width: 100%;
  opacity: 0.65;
}

@media (max-width: 800px) {
  .battle-window {
    min-width: 100%;
    max-width: 100%;
    min-height: 100vh;
    border-radius: 0;
    padding: 0;
  }
  .battle-log-wrapper {
    min-height: 110px;
    margin: 0 0.3rem;
  }
  .battle-main-row {
    margin: 0.8rem 0 0.3rem 0;
  }
  .battle-graphic-col,
  .battle-controls-col {
    margin: 0;
    width: 100%;
  }
  .fighter-row {
    gap: 0.15rem;
    padding: 0.4rem 0.3rem;
    margin: 0;
  }
  .attack-btn, .start-battle-btn, button {
    min-width: 90px;
    font-size: 0.97rem;
    padding: 0.14rem 0.7rem;
  }
  .battle-actions-bottom {
    margin-top: 0.8rem;
  }
}
.battle-next-btn-row-centered {
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 1.1rem 0 0.5rem 0;
  width: 100%;
}

.next-chevron-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  background: #00000000;
  transition: 
    border-color 0.13s, 
    background 0.13s, 
    color 0.13s, 
    box-shadow 0.15s;
  cursor: pointer;

  &:hover, &:focus {
    background: #222d23;
    border-color: #70ffce;
    color: #eafff0;
    box-shadow: 0 0 20px #94ffd6, 0 0 2px #27efb7;
    .chevron, .next-label {
      color: #c6ffe7;
      text-shadow: 0 0 12px #75ffc7cc;
    }
  }

  .chevron {
    font-size: 2.25em;
    font-weight: 900;
    color: #64ffb7;
    text-shadow: 0 0 10px #4fff90, 0 0 3px #00ffba66;
    margin: 0 0.3em;
    pointer-events: none;
    user-select: none;
    transition: color 0.13s, text-shadow 0.13s;
  }
}
.status-badge-enemy {
  display: inline-block;
  position: absolute;
  top: -14px;    
  left: 63%;       
  z-index: 555;
  margin-left: 0;  
  margin-top: 0;
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 0.8em;
  font-weight: 600;
  background: #232b3a;
  color: #fff;
  vertical-align: middle;
}

.status-badge-friendly {
  display: inline-block;
  position: absolute;
  top: -14px;    
  left:10%;       
  z-index: 555;
  margin-left: 0;  
  margin-top: 0;
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 0.8em;
  font-weight: 600;
  background: #232b3a;
  color: #fff;
  vertical-align: middle;
}

.block { background: #1790d4; }
.heal  { background: #3cb371; }
.poison { background: #b84e4e; }

.attack-row-bottom {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 1.2em;
  position: relative;
  align-items: stretch;
}

.attack-description-box {
  width: 100%;
  background: var(--btn-bg);
  height: 3.5rem;
  border: 2px solid #323232;
  box-shadow: inset 0 0 2px #00ffba2a;
  font-family: 'Fira Mono', monospace;
  color: #e4ffe6;
  padding: 0.4rem 0.8rem;
  font-size: 0.8rem;
}

.attack-name {
  font-family: 'Fira Mono', monospace;
  font-weight: 700;
  font-size: 1em;
  color: #8affc1;
}

.attack-description {
  font-family: 'Fira Mono', monospace;
  font-size: 0.9em;
  font-weight: 400;
  color: #e4ffe6;
  opacity: 0.96;
}

.battle-bottom-nav {
  width: 100%;
  height: 2.5rem;
  background: rgba(18, 27, 24, 0.97);
  border-top: 1px solid #3deeb4;
  display: flex;
  justify-content: flex-end;
  align-items: center;
  gap: 1rem;
  z-index: 200;

  .info-btn {
    margin-right: auto;
    background: none;
    border: none;
    color: #5fffd0;
    font-size: 1em;
    padding: 0.2em 0.5em;
    transition: background 0.15s, color 0.15s;
    &:hover { background: #183a34; color: #fff; }
  }
  .bag-btn {
    background: none;
    border: none;
    color: #89e7c1;
    font-size: 1em;
    padding: 0.2em 0.5em;
    transition: background 0.15s, color 0.15s;
    &:hover { background: #223634; color: #fff; }
  }
  .run-btn {
    background: #be2c2c;
    color: #fff;
    border: 2px solid #8d2c2c;
    font-weight: 800;
    font-size: 1em;
    padding: 0 1.2em;
    margin-left: 0.3em;
    box-shadow: 0 0 3px #7c3d3d;
    transition: background 0.18s, border-color 0.15s, color 0.15s;
    display: flex;
    justify-content: center;
    align-items: center;
    &:hover:not(:disabled) {
      background: #ffb7af;
      border-color: #ff695b;
      color: #fff5e6;
      text-shadow: 0 0 6px #ff9797;
    }
    &:disabled {
      background: #493232;
      color: #a88787;
      border-color: #493232;
      opacity: 0.7;
    }
  }
}

.battle-controls-col {
  padding-bottom: 4.1rem;
}

@media (max-width: 700px) {
  .battle-bottom-nav {
    height: 3.5rem;
    font-size: 0.97em;
    gap: 0.75rem;
    padding: 0 0.5rem;
  }
  .attack-description-box {
    font-size: 0.97em;
    min-height: 3.7em;
    padding: 0.35rem 0.6rem;
  }
  .battle-controls-col {
    padding-bottom: 3.4rem;
  }
}