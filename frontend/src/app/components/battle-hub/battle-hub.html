<div class="battle-hub-wrapper">

  <!-- NAVBAR -->
  <nav class="battle-hub-navbar">
    <button 
      *ngFor="let tab of ['monsters', 'challenges', 'makgora', 'dungeons', 'raids']"
      [class.active]="activeTab === tab"
      (click)="activeTab = tab">
      {{ tab | titlecase }}
    </button>
  </nav>

  <!-- FLIKINNEHÃ…LL -->
  <div class="battle-hub-main">

    <!-- Monsters -->
    <ng-container *ngIf="activeTab === 'monsters'">
      <div class="monsters-container">
        <!-- Monster List -->
        <div class="monster-list-section">
          <h2 class="section-title">Choose Your Monster</h2>
          <div class="monster-list">
            <div 
              *ngFor="let monster of monsters; let i = index"
              class="monster-item"
              [class.selected]="selectedMonster === monster"
              [class.locked]="character && character.level < monster.level"
              (click)="selectMonster(monster)">
              
              <div class="monster-item-content">
                <div class="monster-item-info">
                  <span class="monster-name">{{ monster.name }}</span>
                  <span class="monster-level">Level {{ monster.level }}</span>
                </div>
                <div class="monster-status">
                  <span *ngIf="character && character.level < monster.level" class="locked-text">ðŸ”’ Locked</span>
                  <span *ngIf="!character || character.level >= monster.level" class="available-text">Available</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Monster Details -->
        <div class="monster-details-section" *ngIf="selectedMonster">
          <div class="monster-card">
            <div class="monster-image">
              <img [src]="selectedMonster.imageUrl || 'assets/monsters/skeleton.jpg'" 
                   [alt]="selectedMonster.name"
                   class="monster-img"
                   (error)="onImageError($event)">
            </div>
            
            <div class="monster-info">
              <h3 class="monster-title">{{ selectedMonster.name }}</h3>
              <p class="monster-type">{{ selectedMonster.type | titlecase }}</p>
              <p class="monster-description">{{ selectedMonster.desc }}</p>
              
              <div class="monster-stats">
                <div class="stat-row">
                  <span class="stat-label">Level:</span>
                  <span class="stat-value">{{ selectedMonster.level }}</span>
                </div>
                <div class="stat-row">
                  <span class="stat-label">Health:</span>
                  <span class="stat-value">{{ selectedMonster.maxHp }}</span>
                </div>
                <div class="stat-row">
                  <span class="stat-label">Attack:</span>
                  <span class="stat-value">{{ selectedMonster.attack }}</span>
                </div>
                <div class="stat-row">
                  <span class="stat-label">Defense:</span>
                  <span class="stat-value">{{ selectedMonster.defense }}</span>
                </div>
                <div class="stat-row">
                  <span class="stat-label">XP Reward:</span>
                  <span class="stat-value">{{ selectedMonster.xp }}</span>
                </div>
              </div>

              <button 
                class="fight-button"
                [disabled]="!character || character.currentEnergy <= 0 || (character && character.level < selectedMonster.level)"
                (click)="fight(selectedMonster.name)">
                <span *ngIf="!character || character.currentEnergy <= 0">No Energy</span>
                <span *ngIf="character && character.currentEnergy > 0 && character.level < selectedMonster.level">Level Too Low</span>
                <span *ngIf="character && character.currentEnergy > 0 && character.level >= selectedMonster.level">Fight Monster</span>
              </button>
            </div>
          </div>
        </div>

        <!-- No Selection Message -->
        <div class="no-selection" *ngIf="!selectedMonster">
          <p>Select a monster from the list to view details</p>
        </div>
      </div>
    </ng-container>

    <ng-container *ngIf="['challenges', 'makgora', 'dungeons', 'raids'].includes(activeTab)">
      <section class="hub-block coming-block">
        <h2>{{ activeTab | titlecase }}</h2>
        <p>More content coming soon!</p>
      </section>
    </ng-container>

  </div>

</div>
